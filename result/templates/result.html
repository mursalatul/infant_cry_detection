{% extends "base.html" %}

{% block title %}title will be here{% endblock %}
{% load static %}
{% load tz %}

<!-- custom style start -->
{% block custom_styles %}
<!-- style for result box start-->
<style>
    :root {
        --primary-color: #3a7bd5;
        --secondary-color: #00d2ff;
        --accent-color: #fbb034;
        --dark-color: #222831;
        --success-color: #4ade80;
        --danger-color: #f87171;
        --fade-in: fadeIn 1s ease;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .results-section {
        background: linear-gradient(120deg, #fdfbfb 0%, #ebedee 100%);
        padding: 5rem 0;
        min-height: calc(100vh - 150px);
        display: flex;
        align-items: center;
    }
    .results-card {
        border: none;
        border-radius: 22px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
        transition: all 0.4s cubic-bezier(.4,2,.3,1);
        overflow: hidden;
        background: rgba(255,255,255,0.97);
        backdrop-filter: blur(12px);
        animation: var(--fade-in);
    }
    .results-card:hover {
        transform: translateY(-7px) scale(1.01);
        box-shadow: 0 18px 48px rgba(0,0,0,0.13);
    }
    .results-card .card-body {
        padding: 3.5rem 2.5rem 2.5rem 2.5rem;
    }
    .results-heading {
        position: relative;
        margin-bottom: 2.5rem;
        color: var(--dark-color);
        font-size: 2.3rem;
        font-weight: 800;
        letter-spacing: 0.5px;
    }
    .results-heading:after {
        content: '';
        position: absolute;
        width: 80px;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        bottom: -15px;
        left: 50%;
        transform: translateX(-50%);
        border-radius: 2px;
    }
    .animated-icon {
        width: 70px;
        height: 70px;
        margin-bottom: 1.2rem;
        display: inline-block;
        animation: pulse 1.5s infinite alternate;
    }
    @keyframes pulse {
        0% { filter: drop-shadow(0 0 0 var(--primary-color)); }
        100% { filter: drop-shadow(0 0 12px var(--secondary-color)); }
    }
    .prediction-result {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary-color);
        margin: 2rem 0 1.2rem 0;
        padding: 1.2rem 1rem;
        background: linear-gradient(120deg, rgba(58, 123, 213, 0.10) 0%, rgba(58, 123, 213, 0.04) 100%);
        border-radius: 15px;
        border-left: 6px solid var(--primary-color);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
    }
    .badge-reason {
        font-size: 1.1rem;
        font-weight: 700;
        border-radius: 20px;
        padding: 0.5em 1.2em;
        margin-left: 0.7em;
        color: #fff;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        box-shadow: 0 2px 8px rgba(58,123,213,0.08);
        letter-spacing: 0.03em;
        border: none;
        display: inline-block;
        vertical-align: middle;
        animation: fadeIn 1.2s;
    }
    .btn-try-again {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        border: none;
        border-radius: 12px;
        padding: 1rem 2.5rem;
        font-weight: 600;
        margin-top: 2rem;
        transition: all 0.4s cubic-bezier(.4,2,.3,1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.11);
        color: #fff;
    }
    .btn-try-again:hover {
        transform: translateY(-3px) scale(1.03);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.18);
        background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    }
    .helpful-resources {
        margin-top: 3rem;
    }
    .resource-card {
        text-decoration: none;
        color: inherit;
        display: block;
        transition: all 0.3s cubic-bezier(.4,2,.3,1);
    }
    .resource-card:hover {
        transform: translateY(-5px) scale(1.01);
    }
    .resource-card .card {
        transition: all 0.3s cubic-bezier(.4,2,.3,1);
        border-radius: 15px;
        background: linear-gradient(120deg, #ffffff 0%, #f8f9fa 100%);
    }
    .resource-card:hover .card {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.13);
    }
    .resource-card .bi {
        font-size: 1.5rem;
        display: block;
    }
    .resource-card h6 {
        font-weight: 600;
        margin: 0.5rem 0;
        color: var(--dark-color);
    }
    .analysis-time {
        color: var(--dark-color);
        opacity: 0.7;
        font-size: 0.98rem;
        margin: 1.5rem 0;
        padding: 0.75rem;
        border-radius: 10px;
        background-color: rgba(0, 0, 0, 0.03);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }
    .fade-in {
        animation: fadeIn 1.2s;
    }
    @media (max-width: 768px) {
        .results-card .card-body {
            padding: 2rem 0.7rem 1.5rem 0.7rem;
        }
        .results-section {
            padding: 2.5rem 0 1.5rem 0;
        }
    }
</style>
<!-- style for result box end-->
{% endblock %}
<!-- custom style end -->

{% block content %}
    <!-- Results Section -->
    <section class="results-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card results-card">

                        <div class="card-body text-center">
                            <!-- Animated Baby Mood Avatar -->
                            <div class="fade-in mb-3" style="display:inline-block;">
                                {% if prediction == 'hungry' %}
                                <!-- Sad face, mouth open -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#fffbe7" stroke="#fbb034" stroke-width="4"/>
                                    <ellipse cx="45" cy="60" rx="15" ry="10" fill="#fff"/>
                                    <ellipse cx="45" cy="62" rx="8" ry="5" fill="#fbb034"/>
                                    <ellipse cx="32" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="58" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="32" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="58" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <path d="M38 70 Q45 80 52 70" stroke="#f87171" stroke-width="3" fill="none"/>
                                </svg>
                                {% elif prediction == 'tired' %}
                                <!-- Sleepy face -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#e6f7ff" stroke="#3a7bd5" stroke-width="4"/>
                                    <ellipse cx="32" cy="48" rx="5" ry="2" fill="#222831"/>
                                    <ellipse cx="58" cy="48" rx="5" ry="2" fill="#222831"/>
                                    <ellipse cx="45" cy="62" rx="10" ry="5" fill="#3a7bd5" opacity="0.15"/>
                                    <path d="M40 60 Q45 65 50 60" stroke="#3a7bd5" stroke-width="3" fill="none"/>
                                    <text x="60" y="30" font-size="18" fill="#3a7bd5" opacity="0.5">Z</text>
                                </svg>
                                {% elif prediction == 'belly_pain' %}
                                <!-- Crying face -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#fff0f3" stroke="#f87171" stroke-width="4"/>
                                    <ellipse cx="32" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="58" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="32" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="58" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="45" cy="65" rx="10" ry="6" fill="#fff"/>
                                    <path d="M38 68 Q45 60 52 68" stroke="#f87171" stroke-width="3" fill="none"/>
                                    <ellipse cx="25" cy="60" rx="2" ry="5" fill="#00d2ff" opacity="0.7">
                                        <animate attributeName="cy" values="60;65;60" dur="1s" repeatCount="indefinite"/>
                                    </ellipse>
                                    <ellipse cx="65" cy="60" rx="2" ry="5" fill="#00d2ff" opacity="0.7">
                                        <animate attributeName="cy" values="60;65;60" dur="1.2s" repeatCount="indefinite"/>
                                    </ellipse>
                                </svg>
                                {% elif prediction == 'burping' %}
                                <!-- Surprised face -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#eafff7" stroke="#00d2ff" stroke-width="4"/>
                                    <ellipse cx="32" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="58" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="32" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="58" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="45" cy="62" rx="6" ry="6" fill="#fff"/>
                                    <ellipse cx="45" cy="62" rx="3" ry="3" fill="#00d2ff"/>
                                </svg>
                                {% elif prediction == 'discomfort' %}
                                <!-- Frown face -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#f7f7f7" stroke="#222831" stroke-width="4"/>
                                    <ellipse cx="32" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="58" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="32" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="58" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <path d="M38 68 Q45 60 52 68" stroke="#222831" stroke-width="3" fill="none"/>
                                </svg>
                                {% else %}
                                <!-- Default happy face -->
                                <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="45" cy="45" r="40" fill="#eafff7" stroke="#4ade80" stroke-width="4"/>
                                    <ellipse cx="32" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="58" cy="44" rx="5" ry="7" fill="#222831"/>
                                    <ellipse cx="32" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <ellipse cx="58" cy="44" rx="2" ry="3" fill="#fff" opacity="0.7"/>
                                    <path d="M38 62 Q45 70 52 62" stroke="#4ade80" stroke-width="3" fill="none"/>
                                </svg>
                                {% endif %}
                            </div>
                            <h2 class="results-heading fw-bold">Detection Result</h2>
                            <div class="prediction-result mb-4">
                                <i class="bi bi-soundwave me-2"></i>
                                <span><strong>Detected Cry Reason:</strong></span>
                                <span class="badge-reason">
                                    {{ prediction|title }}
                                </span>
                            </div>
                            <!-- Animated checkmark for confirmation -->
                            <div class="fade-in mb-2" style="display:inline-block;">
                                <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="19" cy="19" r="18" stroke="var(--success-color)" stroke-width="2" fill="none"/>
                                    <path d="M11 20.5L17 26L27 14" stroke="var(--success-color)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <!-- Analysis Time -->
                            <div class="analysis-time mb-4 fade-in">
                                <i class="bi bi-clock me-2"></i>
                                Analysis performed: {% now "F j, Y, g:i a" %}
                            </div>

                            <!-- Recommendations Section -->
                            <div class="recommendations-box p-4 mb-4 bg-light rounded fade-in">
                                <h4 class="mb-3"><i class="bi bi-lightbulb me-2 text-warning"></i>Recommended Actions</h4>
                                {% if prediction == 'belly_pain' %}
                                    <ul class="text-start">
                                        <li>Gently massage your baby's tummy in a clockwise direction</li>
                                        <li>Try the "bicycle legs" exercise</li>
                                        <li>Keep baby upright after feeding</li>
                                        <li>Consider using gas drops (consult your pediatrician)</li>
                                    </ul>
                                {% elif prediction == 'burping' %}
                                    <ul class="text-start">
                                        <li>Hold baby upright against your shoulder</li>
                                        <li>Gently pat or rub baby's back</li>
                                        <li>Try different burping positions</li>
                                        <li>Take breaks during feeding to burp</li>
                                    </ul>
                                {% elif prediction == 'discomfort' %}
                                    <ul class="text-start">
                                        <li>Check diaper and change if needed</li>
                                        <li>Ensure room temperature is comfortable</li>
                                        <li>Check for tight clothing</li>
                                        <li>Look for any signs of rash or irritation</li>
                                    </ul>
                                {% elif prediction == 'hungry' %}
                                    <ul class="text-start">
                                        <li>Feed your baby immediately</li>
                                        <li>Check if baby is getting enough milk/formula</li>
                                        <li>Consider cluster feeding if applicable</li>
                                        <li>Monitor feeding schedule</li>
                                    </ul>
                                {% elif prediction == 'tired' %}
                                    <ul class="text-start">
                                        <li>Create a calm environment</li>
                                        <li>Start bedtime routine</li>
                                        <li>Dim lights and reduce noise</li>
                                        <li>Consider swaddling if age-appropriate</li>
                                    </ul>
                                {% endif %}
                            </div>

                            <!-- Helpful Resources -->
                            <div class="helpful-resources mb-4 fade-in">
                                <h4 class="mb-4 text-center"><i class="bi bi-link-45deg me-2 text-primary"></i>Helpful Resources</h4>
                                <div class="row g-3 justify-content-center">
                                    {% if prediction == 'belly_pain' %}
                                    <div class="col-md-6">
                                        <a href="https://www.healthline.com/health/parenting/baby-gas-relief" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-bookmark-heart text-primary mb-2"></i>
                                                    <h6>Baby Gas Relief Guide</h6>
                                                    <p class="small text-muted mb-0">Learn effective techniques for relieving gas pain</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="https://www.whattoexpect.com/first-year/colic" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-journal-medical text-primary mb-2"></i>
                                                    <h6>Understanding Colic</h6>
                                                    <p class="small text-muted mb-0">Expert advice on managing colic symptoms</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    {% elif prediction == 'burping' %}
                                    <div class="col-md-6">
                                        <a href="https://www.parents.com/baby/care/gas/best-burping-positions/" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-heart-pulse text-primary mb-2"></i>
                                                    <h6>Burping Techniques</h6>
                                                    <p class="small text-muted mb-0">Effective positions and methods for burping</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="https://www.happiestbaby.com/blogs/baby/burping-baby" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-clipboard2-pulse text-primary mb-2"></i>
                                                    <h6>When to Burp</h6>
                                                    <p class="small text-muted mb-0">Learn when and how often to burp your baby</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    {% elif prediction == 'hungry' %}
                                    <div class="col-md-6">
                                        <a href="https://www.cdc.gov/nutrition/infantandtoddlernutrition/feeding-patterns.html" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-clock-history text-primary mb-2"></i>
                                                    <h6>Feeding Patterns</h6>
                                                    <p class="small text-muted mb-0">CDC guidelines on baby feeding schedules</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="https://www.who.int/health-topics/breastfeeding" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-droplet-half text-primary mb-2"></i>
                                                    <h6>Feeding Guidelines</h6>
                                                    <p class="small text-muted mb-0">WHO recommendations on infant feeding</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    {% elif prediction == 'tired' %}
                                    <div class="col-md-6">
                                        <a href="https://www.sleepfoundation.org/baby-sleep" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-moon-stars text-primary mb-2"></i>
                                                    <h6>Sleep Patterns</h6>
                                                    <p class="small text-muted mb-0">Understanding baby sleep cycles</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="https://www.happiestbaby.com/blogs/baby/baby-sleep-schedule" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-alarm text-primary mb-2"></i>
                                                    <h6>Sleep Schedule</h6>
                                                    <p class="small text-muted mb-0">Creating the perfect sleep routine</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    {% elif prediction == 'discomfort' %}
                                    <div class="col-md-6">
                                        <a href="https://www.healthychildren.org/English/ages-stages/baby/diapers-clothing/Pages/default.aspx" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-shield-check text-primary mb-2"></i>
                                                    <h6>Baby Comfort Guide</h6>
                                                    <p class="small text-muted mb-0">Tips for keeping your baby comfortable</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="https://www.mayoclinic.org/healthy-lifestyle/infant-and-toddler-health/in-depth/diaper-rash/art-20050922" class="resource-card">
                                            <div class="card h-100 border-0 shadow-sm">
                                                <div class="card-body">
                                                    <i class="bi bi-bandaid text-primary mb-2"></i>
                                                    <h6>Common Discomforts</h6>
                                                    <p class="small text-muted mb-0">Managing common baby discomforts</p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Try Again Button -->
                            <div class="d-grid gap-2 col-md-6 mx-auto mt-4 fade-in">
                                <a href="{% url 'cry_detection_view' %}" class="btn btn-try-again btn-lg">
                                    <i class="bi bi-arrow-repeat me-2"></i>Try Another Analysis
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
