{% extends "base.html" %}

{% block title %}Infant Cry Detection - Advanced AI for Baby Care{% endblock %}
{% load static %}
{% load tz %}

{% block custom_styles %}
<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --accent-color: #4f46e5;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --glass-bg: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
    }

    /* Hero Section with Modern Glass Effect */
    .hero-section {
        background: var(--primary-gradient);
        min-height: 100vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
    }

    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="%23ffffff" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><circle cx="200" cy="200" r="100" fill="url(%23a)"/><circle cx="800" cy="300" r="150" fill="url(%23a)"/><circle cx="400" cy="700" r="120" fill="url(%23a)"/></svg>');
        animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }

    .hero-content {
        position: relative;
        z-index: 2;
        text-align: center;
        color: white;
        max-width: 800px;
        margin: 0 auto;
    }

    .hero-title {
        font-size: 3.5rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
        background: linear-gradient(45deg, #fff, #f0f9ff);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
    }

    .hero-subtitle {
        font-size: 1.4rem;
        margin-bottom: 2rem;
        opacity: 0.9;
        font-weight: 300;
    }

    .accuracy-badge {
        display: inline-block;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 50px;
        padding: 0.8rem 2rem;
        margin-bottom: 2rem;
        font-weight: 600;
        font-size: 1.1rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .cta-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 2rem;
    }

    .btn-primary-modern {
        background: linear-gradient(45deg, #fff, #f8fafc);
        color: var(--accent-color);
        border: none;
        padding: 1rem 2.5rem;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1.1rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-secondary-modern {
        background: var(--glass-bg);
        color: white;
        border: 2px solid var(--glass-border);
        padding: 1rem 2.5rem;
        border-radius: 50px;
        font-weight: 600;
        font-size: 1.1rem;
        backdrop-filter: blur(20px);
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-primary-modern:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        color: var(--accent-color);
    }

    .btn-secondary-modern:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border-color: rgba(255, 255, 255, 0.4);
    }

    /* Research Insights Section */
    .research-section {
        padding: 6rem 0;
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
    }

    .research-card {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        border: 1px solid #e5e7eb;
        height: 100%;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .research-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary-gradient);
    }

    .research-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }

    .research-stat {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--accent-color);
        margin-bottom: 0.5rem;
        display: block;
    }

    /* Technology Stack */
    .tech-section {
        padding: 6rem 0;
        background: var(--primary-gradient);
        color: white;
        position: relative;
    }

    .tech-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }

    .tech-item {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
    }

    .tech-item:hover {
        transform: translateY(-5px);
        background: rgba(255, 255, 255, 0.15);
    }

    .tech-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        display: block;
        color: #fbbf24;
    }

    /* Enhanced Feature Cards */
    .features-section {
        padding: 6rem 0;
        background: #ffffff;
    }

    .feature-card-modern {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        text-align: center;
        transition: all 0.4s ease;
        border: 1px solid #f3f4f6;
        height: 100%;
        position: relative;
        overflow: hidden;
    }

    .feature-card-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--primary-gradient);
        opacity: 0;
        transition: all 0.4s ease;
        z-index: 1;
    }

    .feature-card-modern:hover::before {
        opacity: 0.05;
    }

    .feature-card-modern:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        border-color: var(--accent-color);
    }

    .feature-card-modern > * {
        position: relative;
        z-index: 2;
    }

    .feature-icon-modern {
        width: 80px;
        height: 80px;
        margin: 0 auto 1.5rem;
        background: var(--primary-gradient);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
    }

    /* Process Section */
    .process-section {
        padding: 6rem 0;
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
    }

    .process-step {
        text-align: center;
        position: relative;
        margin-bottom: 2rem;
    }

    .process-number {
        width: 60px;
        height: 60px;
        background: var(--primary-gradient);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 800;
        font-size: 1.2rem;
        margin: 0 auto 1rem;
        box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
    }

    .process-step::after {
        content: '';
        position: absolute;
        top: 30px;
        left: 50%;
        width: 2px;
        height: 100px;
        background: linear-gradient(to bottom, var(--accent-color), transparent);
        transform: translateX(-50%);
        z-index: -1;
    }

    .process-step:last-child::after {
        display: none;
    }

    /* Stats Counter */
    .stats-section {
        padding: 5rem 0;
        background: linear-gradient(135deg, #2b32b2, #1488cc);
        color: white;
        text-align: center;
    }

    .stat-item {
        margin-bottom: 2rem;
    }

    .stat-number {
        font-size: 3rem;
        font-weight: 800;
        display: block;
        margin-bottom: 0.5rem;
    }

    .stat-label {
        font-size: 1.1rem;
        opacity: 0.9;
    }

    /* FAQ Section */
    .faq-section {
        padding: 6rem 0;
        background: var(--primary-gradient);
        color: white;
    }

    .faq-item {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 15px;
        margin-bottom: 1rem;
        overflow: hidden;
    }

    .faq-question {
        background: transparent;
        border: none;
        color: white;
        padding: 1.5rem 2rem;
        text-align: left;
        width: 100%;
        font-weight: 600;
        font-size: 1.1rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .faq-question:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .faq-answer {
        padding: 0 2rem 1.5rem;
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.6;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
        }
        
        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }
        
        .btn-primary-modern,
        .btn-secondary-modern {
            width: 100%;
            max-width: 300px;
            justify-content: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <div class="accuracy-badge">
                🏆 Research-Backed 99.48% Accuracy
            </div>
            <h1 class="hero-title">
                Decode Your Baby's Needs with AI Precision
            </h1>
            <p class="hero-subtitle">
                Advanced machine learning system that analyzes infant cries to identify their cause - hunger, discomfort, tiredness, belly pain, or need for burping - helping parents respond with confidence.
            </p>
            <div class="cta-buttons">
                <a href="{% url 'cry_detection_view' %}" class="btn-primary-modern">
                    <i class="bi bi-play-circle"></i>
                    Try Detection Now
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Research Insights Section -->
<section id="research" class="research-section">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="fw-bold mb-3" style="font-size: 2.5rem; color: var(--text-primary);">
                    Breakthrough Research Results
                </h2>
                <p class="lead text-muted">
                    Our system achieves unprecedented accuracy in infant cry classification, surpassing all previous studies in the field.
                </p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="research-card">
                    <span class="research-stat">99.48%</span>
                    <h5 class="fw-bold mb-3">Classification Accuracy</h5>
                    <p class="text-muted">Our SVM model with RBF kernel achieved the highest accuracy ever reported in infant cry detection literature, outperforming previous best results by 2.48%.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="research-card">
                    <span class="research-stat">203</span>
                    <h5 class="fw-bold mb-3">Audio Features</h5>
                    <p class="text-muted">Comprehensive feature extraction including 40 MFCCs, their derivatives, spectral centroid, rolloff, and zero-crossing rate for complete acoustic characterization.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="research-card">
                    <span class="research-stat">5</span>
                    <h5 class="fw-bold mb-3">Cry Categories</h5>
                    <p class="text-muted">Accurately classifies cries into hunger, discomfort, tiredness, belly pain, and burping needs with balanced dataset training across all categories.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Technology Stack -->
<section class="tech-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-12">
                <h2 class="fw-bold mb-3" style="font-size: 2.5rem;">
                    Powered by Advanced AI Technology
                </h2>
                <p class="lead mb-5 opacity-75">
                    State-of-the-art machine learning techniques ensure reliable and accurate cry interpretation.
                </p>
            </div>
        </div>
        <div class="tech-grid">
            <div class="tech-item">
                <i class="bi bi-cpu tech-icon"></i>
                <h5 class="fw-bold mb-2">Support Vector Machines</h5>
                <p class="mb-0 opacity-75">RBF kernel-based SVM delivering superior classification performance</p>
            </div>
            <div class="tech-item">
                <i class="bi bi-soundwave tech-icon"></i>
                <h5 class="fw-bold mb-2">MFCC Analysis</h5>
                <p class="mb-0 opacity-75">Mel-Frequency Cepstral Coefficients for comprehensive audio analysis</p>
            </div>
            <div class="tech-item">
                <i class="bi bi-bar-chart-line tech-icon"></i>
                <h5 class="fw-bold mb-2">Ensemble Methods</h5>
                <p class="mb-0 opacity-75">Multiple algorithms tested including Random Forest and Gradient Boosting</p>
            </div>
            <div class="tech-item">
                <i class="bi bi-shield-check tech-icon"></i>
                <h5 class="fw-bold mb-2">Data Augmentation</h5>
                <p class="mb-0 opacity-75">Pitch shifting, time stretching, and noise addition for robust training</p>
            </div>
        </div>
    </div>
</section>

<!-- Enhanced Features Section -->
<section class="features-section">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="fw-bold mb-3" style="font-size: 2.5rem; color: var(--text-primary);">
                    Why Parents Trust Our System
                </h2>
                <p class="lead text-muted">
                    Combining scientific rigor with practical usability for modern parenting needs.
                </p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-award"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Research-Validated</h5>
                    <p class="text-muted">Based on peer-reviewed research with the Donate a Cry Corpus dataset, ensuring scientific reliability and accuracy.</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-lightning"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Instant Analysis</h5>
                    <p class="text-muted">Real-time processing delivers results in seconds, helping you respond to your baby's needs immediately.</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-phone"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Universal Compatibility</h5>
                    <p class="text-muted">Works with any device and supports multiple audio formats (MP3, WAV, AAC, OGG) for maximum convenience.</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-shield-lock"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Privacy First</h5>
                    <p class="text-muted">Audio files are processed instantly and never stored. Your baby's data remains completely private and secure.</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-people"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Parent-Designed</h5>
                    <p class="text-muted">Intuitive interface designed specifically for sleep-deprived parents who need quick, reliable answers.</p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="feature-card-modern">
                    <div class="feature-icon-modern">
                        <i class="bi bi-heart"></i>
                    </div>
                    <h5 class="fw-bold mb-3">Care Guidance</h5>
                    <p class="text-muted">Beyond detection, receive actionable care suggestions tailored to your baby's identified need.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Process -->
<section class="process-section">
    <div class="container">
        <div class="row text-center mb-5">
            <div class="col-12">
                <h2 class="fw-bold mb-3" style="font-size: 2.5rem; color: var(--text-primary);">
                    How Our AI Works
                </h2>
                <p class="lead text-muted">
                    Four simple steps powered by advanced machine learning algorithms.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="process-step">
                    <div class="process-number">1</div>
                    <h5 class="fw-bold mb-3">Audio Capture</h5>
                    <p class="text-muted">Record or upload your baby's cry using any device. Our system accepts multiple audio formats for maximum flexibility.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="process-step">
                    <div class="process-number">2</div>
                    <h5 class="fw-bold mb-3">Feature Extraction</h5>
                    <p class="text-muted">Advanced algorithms extract 203 acoustic features including MFCCs, spectral properties, and temporal dynamics.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="process-step">
                    <div class="process-number">3</div>
                    <h5 class="fw-bold mb-3">AI Classification</h5>
                    <p class="text-muted">Our trained SVM model analyzes the features to classify the cry into one of five categories with 99.48% accuracy.</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="process-step">
                    <div class="process-number">4</div>
                    <h5 class="fw-bold mb-3">Actionable Results</h5>
                    <p class="text-muted">Receive immediate results with care recommendations to help you respond appropriately to your baby's needs.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Trust Counter -->
<section class="stats-section">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4">
                <div class="stat-item">
                    <span class="stat-number" id="trust-count">{{ trust_count|default:0 }}</span>
                    <div class="stat-label">Trusted Analyses</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-item">
                    <span class="stat-number">99.48%</span>
                    <div class="stat-label">Accuracy Rate</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-item">
                    <span class="stat-number">5</span>
                    <div class="stat-label">Cry Categories</div>
                </div>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-12 text-center">
                <p class="lead opacity-75">
                    Join thousands of parents who trust our AI-powered system to better understand their baby's needs.
                </p>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="fw-bold mb-5 text-center" style="font-size: 2.5rem;">
                    Frequently Asked Questions
                </h2>
                <div class="faq-list">
                    <div class="faq-item">
                        <button class="faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#faq1" aria-expanded="false" aria-controls="faq1">
                            How accurate is the cry detection system?
                        </button>
                        <div id="faq1" class="collapse" aria-labelledby="faq1">
                            <div class="faq-answer">
                                Our system achieves 99.48% accuracy, the highest ever reported in scientific literature for infant cry classification. This was validated through rigorous testing on the Donate a Cry Corpus dataset.
                            </div>
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                            What cry types can the system identify?
                        </button>
                        <div id="faq2" class="collapse">
                            <div class="faq-answer">
                                Our AI can distinguish between five main cry causes: hunger, discomfort, tiredness, belly pain, and the need for burping. Each category is identified through unique acoustic patterns.
                            </div>
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                            Is my baby's audio data stored or shared?
                        </button>
                        <div id="faq3" class="collapse">
                            <div class="faq-answer">
                                Absolutely not. All audio processing happens in real-time and files are never stored on our servers. Your privacy and your baby's data security are our top priorities.
                            </div>
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                            What audio formats are supported?
                        </button>
                        <div id="faq4" class="collapse">
                            <div class="faq-answer">
                                We support all major audio formats including MP3, WAV, AAC, OGG, and more. WAV format provides the best accuracy due to its lossless compression.
                            </div>
                        </div>
                    </div>
                    <div class="faq-item">
                        <button class="faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                            How was this system developed and validated?
                        </button>
                        <div id="faq5" class="collapse">
                            <div class="faq-answer">
                                Our system was developed using advanced machine learning techniques, extracting 203 audio features from each cry sample. We tested 10 different algorithms and achieved superior results with Support Vector Machines using RBF kernels.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", function () {
    // FAQ Accordion handling
    const faqQuestions = document.querySelectorAll('.faq-question');
    faqQuestions.forEach(question => {
        question.addEventListener('click', function() {
            const target = this.getAttribute('data-bs-target');
            const collapse = document.querySelector(target);
            
            // Close all other accordions
            document.querySelectorAll('.collapse.show').forEach(item => {
                if (item !== collapse) {
                    item.classList.remove('show');
                    const button = document.querySelector(`[data-bs-target="#${item.id}"]`);
                    if (button) button.setAttribute('aria-expanded', 'false');
                }
            });

            // Toggle current accordion
            const isExpanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !isExpanded);
            collapse.classList.toggle('show');
        });
    });

    // Trust counter animation
    const target = parseInt('{{ trust_count|default:0 }}');
    const countElement = document.getElementById('trust-count');
    let count = 0;
    const speed = 50;

    function updateCount() {
        const increment = Math.ceil(target / 100);
        count += increment;
        if (count > target) count = target;
        countElement.innerText = count.toLocaleString();
        if (count < target) setTimeout(updateCount, speed);
    }

    const observer = new IntersectionObserver(function (entries, observer) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                updateCount();
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });

    const counterSection = document.querySelector('.stats-section');
    if (counterSection) observer.observe(counterSection);
});
</script>
{% endblock %}